var DMP = require('googlediff')
var dmp = new DMP();

function makeString(len) {
	len = len || 80 * 24;
	var text = "";
	var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\n";
	for( var i=0; i < len; i++ ) {
		text += possible.charAt(Math.floor(Math.random() * possible.length));
	}
	return text;
}

var strings = []
while(strings.length < 100) {
	strings.push(makeString());
}
var lor1 = require('./lorem');
var lor2 = require('./lorem2');

var expect = require('chai').expect;

var string1 = 'asdf\nfdsa\nhello there\nwhy helloooo';
var string2 = 'qwer\nfdsa\n \ny hello';

describe('dmp', function() {
	it('works', function() {
		var d = dmp.diff_main(string1,string2);
		console.log(d);
	});
});

var TUI = require('../index');
describe('CSI', function() {
	it('exists', function() {
			expect(typeof TUI.CSI).equal('object');
	});
	describe('text', function() {
		it('returns a string', function() {
			expect(typeof TUI.CSI.text()).equal('string');
		});
	});

	describe('write', function() {
		it('writes to the location', function() {
			TUI.CSI.write('hi',1,1);
			expect(TUI.CSI._text[1][1]).equal('h');
			expect(TUI.CSI._text[1][2]).equal('i');
		});
	});

	describe('diff', function() {
		var d = dmp.diff_main(string1,string2);	
		var arr =	string1.split('\n');
		arr.forEach(function(line,ind) {
			TUI.CSI.write(line,ind);		
		});
		TUI.CSI.patch(d);
		console.log(TUI.CSI.text());
	});
});
